chrome.runtime.onInstalled.addListener(()=>{console.log("UsersPrompts AI Extension installed")});chrome.runtime.onMessage.addListener((e,i,o)=>{var t;if(console.log("Background received message:",e),e.type==="OPEN_POPUP"&&(console.log("Opening popup..."),chrome.action.openPopup(),o({success:!0})),e.type==="OPEN_POPUP_WITH_TEXT"){const n=e.text||((t=e.data)==null?void 0:t.text)||"";return console.log("Storing text and opening popup:",n.substring(0,50)+"..."),chrome.storage.local.set({selectedText:n},()=>{chrome.action.openPopup(),o({success:!0})}),!0}return e.type==="OPTIMIZE_PROMPT"&&(console.log("Received prompt optimization request:",e.data),o({success:!0})),e.type==="SCORE_PROMPT"&&(console.log("Received prompt scoring request:",e.data),o({success:!0})),!0});chrome.runtime.onInstalled.addListener(()=>{try{chrome.contextMenus.create({id:"optimizePrompt",title:"Optimize Prompt with UsersPrompts",contexts:["selection"]}),console.log("Context menu created")}catch(e){console.log("Context menus not available:",e)}});var c;(c=chrome.contextMenus)==null||c.onClicked.addListener((e,i)=>{e.menuItemId==="optimizePrompt"&&e.selectionText&&(console.log("Context menu clicked, storing text:",e.selectionText.substring(0,50)+"..."),chrome.storage.local.set({selectedText:e.selectionText},()=>{chrome.action.openPopup()}))});chrome.action.onClicked.addListener(e=>{console.log("Extension icon clicked"),chrome.action.openPopup()});
